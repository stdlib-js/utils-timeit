// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/process-cwd@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-null@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/random-base-minstd-shuffle@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-property@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/time-tic@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/time-toc@esm/index.mjs";function _(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function h(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var b={iterations:1e6,repeats:3,before:"",after:"",asynchronous:!1},j=a,y=u,g=c.isPrimitive,x=e.isPrimitive,w=f.isPrimitive,E=l,C=o;var I=function(e,t){return j(t)?!y(t,"iterations")||(e.iterations=t.iterations,g(e.iterations)||E(e.iterations))?y(t,"repeats")&&(e.repeats=t.repeats,!g(e.repeats))?new TypeError(C("invalid option. `%s` option must be a positive integer. Option: `%s`.","repeats",e.repeats)):y(t,"before")&&(e.before=t.before,!x(e.before))?new TypeError(C("invalid option. `%s` option must be a string. Option: `%s`.","before",e.before)):y(t,"after")&&(e.after=t.after,!x(e.after))?new TypeError(C("invalid option. `%s` option must be a string. Option: `%s`.","after",e.after)):y(t,"asynchronous")&&(e.asynchronous=t.asynchronous,!w(e.asynchronous))?new TypeError(C("invalid option. `%s` option must be a boolean. Option: `%s`.","asynchronous",e.asynchronous)):null:new TypeError(C("invalid option. `%s` option must be a positive integer or null. Option: `%s`.","iterations",e.iterations)):new TypeError(C("invalid argument. Options argument must be an object. Value: `%s`.",t))},O=p,T=m,$=v;var N=function(e){var t={};return O(t,"tic",{configurable:!1,enumerable:!1,writable:!1,value:T}),O(t,"toc",{configurable:!1,enumerable:!1,writable:!1,value:$}),O(t,"done",{configurable:!1,enumerable:!1,writable:!1,value:e}),{tic:T,toc:$,done:e}};var P=function(e,t,r){var n,i,o,s,a,u,c,f,l,d,p,m;return a='"use strict";',i="__after$"+e+"__",s="__main$"+e+"__",u="__cb1$"+e+"__",c="__cb2$"+e+"__",f="__cb3$"+e+"__",a+="var "+(l="__ctx$"+e+"__")+" = this;",a+="var "+(o="__state$"+e+"__")+" = {};",a+="var "+(m="__i$"+e+"__")+","+(d="__t$"+e+"__")+","+(p="__d$"+e+"__")+";",a+="function "+(n="__before$"+e+"__")+"( state, next ) {",a+="  "+(r.before||"next();")+";",a+="}",a+="function "+u+"( error ) {",a+="  if ( error ) {",a+="    return "+l+".done( error );",a+="  }",a+="  "+m+" = 0;",a+="  "+d+" = "+l+".tic();",a+="  "+s+"( "+o+","+c+" );",a+="}",a+="function "+s+"( state, next ) {",a+="  "+(t||"next();")+";",a+="}",a+="function "+c+"( error ) {",a+="  if ( error ) {",a+="    return "+l+".done( error );",a+="  }",a+="  "+m+" += 1;",a+="  if ( "+m+" < "+r.iterations+" ) {",a+="    return "+s+"( "+o+","+c+" );",a+="  }",a+="  "+p+" = "+l+".toc( "+d+" );",a+="  "+i+"( "+o+","+f+" );",a+="}",a+="function "+i+"( state, next ) {",a+="  "+(r.after||"next();")+";",a+="}",a+="function "+f+"( error ) {",a+="  if ( error ) {",a+="    return "+l+".done( error );",a+="  }",a+="  "+l+".done( null,"+p+" );",a+="}",a+=n+"( "+o+","+u+" );",a+="return "+e+";"};var R,S=function(e,t,r){var n,i,o,s,a;return n='"use strict";',n+="var "+(i="__ctx$"+e+"__")+" = this;",n+="var "+(o="__t$"+e+"__")+","+(s="__d$"+e+"__")+","+(a="__i$"+e+"__")+";",n+=r.before+";",n+=o+" = "+i+".tic();",n+="for ( "+a+"= 0; "+a+" < "+r.iterations+"; "+a+"++ ) {",n+=t+";",n+="}",n+=s+" = "+i+".toc( "+o+" );",n+=r.after+";",n+=i+".done( null, "+s+" );",n+="return "+e+";"},k="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function F(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t}function U(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)}function q(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}var D=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function M(){}function V(e){if(!(this instanceof V))return new V(e);this.code=e}function A(e){return new V(e)}function z(e){if(W(e))return e;var t=new M;return"object"==typeof e&&U(F(e),(function(r){t[r]=e[r]})),t}function B(e,t,r){return new V(e,r).runInContext(t,r)}function J(e,t){return new V(e,t).runInThisContext(t)}function W(e){return e instanceof M}function G(e,t,r){return new V(e,r).runInNewContext(t,r)}M.prototype={},V.prototype.runInContext=function(e){if(!(e instanceof M))throw new TypeError("needs a 'context' argument.");if(k.document){var t=k.document.createElement("iframe");t.style||(t.style={}),t.style.display="none",k.document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),U(F(e),(function(t){r[t]=e[t]})),U(D,(function(t){e[t]&&(r[t]=e[t])}));var o=F(r),s=n.call(r,this.code);return U(F(r),(function(t){(t in e||-1===function(e,t){if(K)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}(o,t))&&(e[t]=r[t])})),U(D,(function(t){var n,i,o;t in e||(n=e,i=t,o=r[t],"function"!=typeof R&&(R=q),R(n,i,o))})),k.document.body.removeChild(t),s}return function(e,t){var r=F(k);return r.push("with (this.__ctx__){return eval(this.__code__)}"),Function.apply(null,r).apply({__code__:e,__ctx__:t})}(this.code,e)},V.prototype.runInThisContext=function(){return new Function("code","return eval(code);").call(k,this.code)},V.prototype.runInNewContext=function(e){var t=z(e),r=this.runInContext(t);return e&&U(F(t),(function(r){e[r]=t[r]})),r};var H={runInContext:B,isContext:W,createContext:z,createScript:A,Script:V,runInThisContext:J,runInNewContext:G},K=[].indexOf;var L=_(Object.freeze({__proto__:null,Script:V,createScript:A,createContext:z,runInContext:B,runInThisContext:J,isContext:W,runInNewContext:G,default:H})),Q=function(e){var t="";return t+="(function(require,__filename,__dirname){",t+=e,t+="});"};var X=d,Y=N,Z=P,ee=S,te=function(e,t){var r,n;return t=Q(t),n={filename:e,lineOffset:0},r=new L.Script(t,n),n={displayErrors:!0},r.runInThisContext(n)};var re=function(e,t,r,n,i){var o,s;if(s=X(),o=Y(a),e=t.asynchronous?Z(s,e,t):ee(s,e,t),te(r,e).call(o,h,r,n)!==s)return a(new Error("evaluation error. Unable to retrieve evaluation results. Ensure that the provided snippet does not return prematurely."));function a(e,t){return e?i(e):i(null,t)}};var ne=function(e){var t,r,n;for(t=e[0],n=1;n<e.length;n++)((r=e[n])[0]<t[0]||r[0]===t[0]&&r[1]<t[1])&&(t=r);return t};var ie=function(e,t){var r,n,i;return n=t/(r=(i=ne(e))[0]+i[1]/1e9),{iterations:t,repeats:e.length,min:i,elapsed:r,rate:n,times:e}},oe=e.isPrimitive,se=t,ae=r,ue=n,ce=i,fe=o,le=s,de=b,pe=I,me=re,ve=ie;var _e=function(e,t,r){var n,i,o,s,a,u;if(!oe(e))throw new TypeError(fe("invalid argument. First argument must be a string. Value: `%s`.",e));if(i=ue(de),2===arguments.length)u=t;else if(u=r,s=pe(i,t))throw s;if(!se(u))throw new TypeError(fe("invalid argument. Callback argument must be a function. Value: `%s`.",u));n=new Array(i.repeats),o=ce(),a=0;try{me(e,i,"timeit.js",o,f)}catch(e){return p(s=new Error(fe("evaluation error. Encountered an error when evaluating snippet. %s",e.message)))}function c(t){le((function(){me(e,i,"timeit.js",o,t)}))}function f(e,t){return e?p(e):ae(t)&&2===t.length?null===i.iterations?(i.iterations=10,c(l)):c(d):p(e=new Error("evaluation error. Did not receive timing results."))}function l(e,t){return e?p(e):t[0]+t[1]/1e9<.1&&i.iterations<1e10?(i.iterations*=10,c(l)):c(d)}function d(e,t){return e?p(e):(n[a]=t,(a+=1)<i.repeats?c(d):void p(null,n))}function p(e,t){var r;e||(r=ve(t,i.iterations)),le((function(){if(e)return u(e);u(null,r)}))}};export{_e as default};
//# sourceMappingURL=index.mjs.map
